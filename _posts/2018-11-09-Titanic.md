---
layout: post
title: Predicting Survival on the Titanic
nocomments: true
---


# Passengers on the Titanic: predict who will survive

Step 1: Import libraries, define testing function, and read in data


```python
#import libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.ensemble import GradientBoostingClassifier, RandomForestClassifier
from sklearn.tree import DecisionTreeClassifier
from sklearn.linear_model import LogisticRegression
from sklearn.neighbors import KNeighborsClassifier
from sklearn.metrics import accuracy_score, precision_score, f1_score, recall_score
from sklearn.naive_bayes import GaussianNB
from sklearn.naive_bayes import BernoulliNB
from sklearn.model_selection import train_test_split
```


```python
#define classification algorithms
gbc = GradientBoostingClassifier()
r = RandomForestClassifier()
d = DecisionTreeClassifier()
l = LogisticRegression()
k = KNeighborsClassifier()
g = GaussianNB()
b = BernoulliNB()

#list of algorithms and names for our function later on
algorithms = [gbc, r, d, l, k, g, b]
names= ['Gradient Boosting', 'Random Forest', 'Decision Tree','Logisic Regression','K Nearest', 'GaussianNB', 'BernoulliNB']
```


```python
#define the function that we will use to determine best classification algorithm
def tDMassess(X, y, algorithms= algorithms, names = names):
    #train the data
    for i in range(len(algorithms)):
        algorithms[i] = algorithms[i].fit(X,y)
    #print metrics
    accuracy = []
    precision = []
    recall = []
    f1 = []
    for i in range(len(algorithms)):
        print(i)
        accuracy.append(accuracy_score(y, algorithms[i].predict(X)))
        print(accuracy)
        precision.append(precision_score(y, algorithms[i].predict(X)))
        print(precision)
        recall.append(recall_score(y, algorithms[i].predict(X)))
        print(recall)
        f1.append(f1_score(y, algorithms[i].predict(X)))
        print(f1)
        print('next loop')
    metrics = pd.DataFrame(columns = ['Accuracy', 'Precision', 'Recall', 'F1'], index= names)
    metrics['Accuracy'] = accuracy
    metrics['Precision'] = precision
    metrics['Recall'] = recall
    metrics['F1'] = f1
    return metrics
```


```python
training = pd.read_csv('C:\\Users\\ckoni\\Desktop\\DevMastersWork\\Day 6 Files\\all\\train.csv')
test = pd.read_csv('C:\\Users\\ckoni\\Desktop\\DevMastersWork\\Day 6 Files\\all\\test.csv')

training.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>



Step 2: Do some primary EDA to see how data will need to be cleaned/ augmented


```python
test.isnull().sum()
```




    PassengerId      0
    Pclass           0
    Name             0
    Sex              0
    Age             86
    SibSp            0
    Parch            0
    Ticket           0
    Fare             1
    Cabin          327
    Embarked         0
    dtype: int64




```python
#We will handle the rest of the nulls later, but this Fare one we can take care of easily now.
test[test.Fare.isnull()]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>152</th>
      <td>1044</td>
      <td>3</td>
      <td>Storey, Mr. Thomas</td>
      <td>male</td>
      <td>60.5</td>
      <td>0</td>
      <td>0</td>
      <td>3701</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>




```python
test[test['Pclass'] == 3].mean()
```




    PassengerId    1094.178899
    Pclass            3.000000
    Age              24.027945
    SibSp             0.463303
    Parch             0.417431
    Fare             12.459678
    dtype: float64




```python
test.loc[152, 'Fare'] = 12.459678
```


```python
#combine the data for feature engineering
data = pd.concat([training, test])
```

    C:\Users\ckoni\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: FutureWarning: Sorting because non-concatenation axis is not aligned. A future version
    of pandas will change to not sort by default.

    To accept the future behavior, pass 'sort=True'.

    To retain the current behavior and silence the warning, pass sort=False





```python
data.shape
```




    (1309, 12)




```python
data.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Fare</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>SibSp</th>
      <th>Survived</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1046.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>891.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>29.881138</td>
      <td>33.279562</td>
      <td>0.385027</td>
      <td>655.000000</td>
      <td>2.294882</td>
      <td>0.498854</td>
      <td>0.383838</td>
    </tr>
    <tr>
      <th>std</th>
      <td>14.413493</td>
      <td>51.742084</td>
      <td>0.865560</td>
      <td>378.020061</td>
      <td>0.837836</td>
      <td>1.041658</td>
      <td>0.486592</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.170000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>21.000000</td>
      <td>7.895800</td>
      <td>0.000000</td>
      <td>328.000000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>28.000000</td>
      <td>14.454200</td>
      <td>0.000000</td>
      <td>655.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>39.000000</td>
      <td>31.275000</td>
      <td>0.000000</td>
      <td>982.000000</td>
      <td>3.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>80.000000</td>
      <td>512.329200</td>
      <td>9.000000</td>
      <td>1309.000000</td>
      <td>3.000000</td>
      <td>8.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
data.isnull().sum()
```




    Age             263
    Cabin          1014
    Embarked          2
    Fare              0
    Name              0
    Parch             0
    PassengerId       0
    Pclass            0
    Sex               0
    SibSp             0
    Survived        418
    Ticket            0
    dtype: int64




```python
data.index
```




    Int64Index([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
                ...
                408, 409, 410, 411, 412, 413, 414, 415, 416, 417],
               dtype='int64', length=1309)



# Visual EDA

Step 2: Personally, I'm a visual learner. So I like to take a look at graphs of some possible key features in order to get a sense for what impacts the survivability of passengers. Below, I have graphed some features that I knew may play major roles in impacting our key variable (Passenger Class/Age), or features that I could not get a good sense of from our info/describe statements (SibSp/Fare).

#I used swarmplots because theyre a good plot to use to show data density and spread when you dont have an especially large dataset


```python
sns.set(style="darkgrid")
_ = plt.figure(figsize= (13, 9))
_ = plt.subplot(2,3,1)
_ = sns.swarmplot(x="Pclass", y="Age", hue="Survived", data= data)

_ = plt.subplot(2,3,2)
_ = sns.swarmplot(x="Pclass", y="Parch", hue="Survived", data= data)

_ = plt.subplot(2,3,3)
_ = sns.swarmplot(x="Pclass", y="SibSp", hue="Survived", data= data)

_ = plt.subplot(2,3,4)
_ = sns.swarmplot(x="Sex", y="Age", hue="Survived", data= data)

_ = plt.subplot(2,3,5)
_ = sns.swarmplot(x="Embarked", y="Age", hue="Survived", data= data)

_ = plt.subplot(2,3,6)
_ = sns.swarmplot(x="Sex", y="Fare", hue="Survived", data= data)

plt.tight_layout()
```


![png](output_18_0.png)


Based on these graphs, there are only a few features that seem to have an effect on survivability:
#Age
#Pclass
#Sex
#Parch (*possibly* the amount of Parents/Children has an effect on survivability)

The ones that we looked at that we can determine have a very small or no effect on survivability:
#Fare (Pclass is better indicator)
#SibSp
#Ticket, Cabin number, and port of embarkation dont seem to matter at all.

# Data Cleaning

Step 3: Time to do everyone's favorite task, data cleaning! I noticed that there were a lot of null values in the Age column, which was one of our major features that we identified, which means we have to fill it somehow.


```python
#Take a look at the null Age values just to see what we're workin with
data[data['Age'].isnull()]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>Fare</th>
      <th>Name</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Sex</th>
      <th>SibSp</th>
      <th>Survived</th>
      <th>Ticket</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>8.4583</td>
      <td>Moran, Mr. James</td>
      <td>0</td>
      <td>6</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>330877</td>
    </tr>
    <tr>
      <th>17</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>13.0000</td>
      <td>Williams, Mr. Charles Eugene</td>
      <td>0</td>
      <td>18</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>244373</td>
    </tr>
    <tr>
      <th>19</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Masselmani, Mrs. Fatima</td>
      <td>0</td>
      <td>20</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>2649</td>
    </tr>
    <tr>
      <th>26</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Emir, Mr. Farred Chehab</td>
      <td>0</td>
      <td>27</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>2631</td>
    </tr>
    <tr>
      <th>28</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.8792</td>
      <td>O'Dwyer, Miss. Ellen "Nellie"</td>
      <td>0</td>
      <td>29</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>330959</td>
    </tr>
    <tr>
      <th>29</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8958</td>
      <td>Todoroff, Mr. Lalio</td>
      <td>0</td>
      <td>30</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>349216</td>
    </tr>
    <tr>
      <th>31</th>
      <td>NaN</td>
      <td>B78</td>
      <td>C</td>
      <td>146.5208</td>
      <td>Spencer, Mrs. William Augustus (Marie Eugenie)</td>
      <td>0</td>
      <td>32</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>PC 17569</td>
    </tr>
    <tr>
      <th>32</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Glynn, Miss. Mary Agatha</td>
      <td>0</td>
      <td>33</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>335677</td>
    </tr>
    <tr>
      <th>36</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2292</td>
      <td>Mamee, Mr. Hanna</td>
      <td>0</td>
      <td>37</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>2677</td>
    </tr>
    <tr>
      <th>42</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.8958</td>
      <td>Kraeff, Mr. Theodor</td>
      <td>0</td>
      <td>43</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>349253</td>
    </tr>
    <tr>
      <th>45</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Rogers, Mr. William John</td>
      <td>0</td>
      <td>46</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>S.C./A.4. 23567</td>
    </tr>
    <tr>
      <th>46</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>15.5000</td>
      <td>Lennon, Mr. Denis</td>
      <td>0</td>
      <td>47</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>0.0</td>
      <td>370371</td>
    </tr>
    <tr>
      <th>47</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>O'Driscoll, Miss. Bridget</td>
      <td>0</td>
      <td>48</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>14311</td>
    </tr>
    <tr>
      <th>48</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>21.6792</td>
      <td>Samaan, Mr. Youssef</td>
      <td>0</td>
      <td>49</td>
      <td>3</td>
      <td>male</td>
      <td>2</td>
      <td>0.0</td>
      <td>2662</td>
    </tr>
    <tr>
      <th>55</th>
      <td>NaN</td>
      <td>C52</td>
      <td>S</td>
      <td>35.5000</td>
      <td>Woolner, Mr. Hugh</td>
      <td>0</td>
      <td>56</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>19947</td>
    </tr>
    <tr>
      <th>64</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>27.7208</td>
      <td>Stewart, Mr. Albert A</td>
      <td>0</td>
      <td>65</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>PC 17605</td>
    </tr>
    <tr>
      <th>65</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>15.2458</td>
      <td>Moubarek, Master. Gerios</td>
      <td>1</td>
      <td>66</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>1.0</td>
      <td>2661</td>
    </tr>
    <tr>
      <th>76</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8958</td>
      <td>Staneff, Mr. Ivan</td>
      <td>0</td>
      <td>77</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>349208</td>
    </tr>
    <tr>
      <th>77</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Moutal, Mr. Rahamin Haim</td>
      <td>0</td>
      <td>78</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>374746</td>
    </tr>
    <tr>
      <th>82</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7875</td>
      <td>McDermott, Miss. Brigdet Delia</td>
      <td>0</td>
      <td>83</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>330932</td>
    </tr>
    <tr>
      <th>87</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Slocovski, Mr. Selman Francis</td>
      <td>0</td>
      <td>88</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>SOTON/OQ 392086</td>
    </tr>
    <tr>
      <th>95</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Shorney, Mr. Charles Joseph</td>
      <td>0</td>
      <td>96</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>374910</td>
    </tr>
    <tr>
      <th>101</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8958</td>
      <td>Petroff, Mr. Pastcho ("Pentcho")</td>
      <td>0</td>
      <td>102</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>349215</td>
    </tr>
    <tr>
      <th>107</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.7750</td>
      <td>Moss, Mr. Albert Johan</td>
      <td>0</td>
      <td>108</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>312991</td>
    </tr>
    <tr>
      <th>109</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>24.1500</td>
      <td>Moran, Miss. Bertha</td>
      <td>0</td>
      <td>110</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>371110</td>
    </tr>
    <tr>
      <th>121</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Moore, Mr. Leonard Charles</td>
      <td>0</td>
      <td>122</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>A4. 54510</td>
    </tr>
    <tr>
      <th>126</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>McMahon, Mr. Martin</td>
      <td>0</td>
      <td>127</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>370372</td>
    </tr>
    <tr>
      <th>128</th>
      <td>NaN</td>
      <td>F E69</td>
      <td>C</td>
      <td>22.3583</td>
      <td>Peter, Miss. Anna</td>
      <td>1</td>
      <td>129</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>2668</td>
    </tr>
    <tr>
      <th>140</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>15.2458</td>
      <td>Boulos, Mrs. Joseph (Sultana)</td>
      <td>2</td>
      <td>141</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>0.0</td>
      <td>2678</td>
    </tr>
    <tr>
      <th>154</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.3125</td>
      <td>Olsen, Mr. Ole Martin</td>
      <td>0</td>
      <td>155</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>Fa 265302</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>268</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Howard, Miss. May Elizabeth</td>
      <td>0</td>
      <td>1160</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>A. 2. 39186</td>
    </tr>
    <tr>
      <th>271</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Fox, Mr. Patrick</td>
      <td>0</td>
      <td>1163</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>368573</td>
    </tr>
    <tr>
      <th>273</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>15.5000</td>
      <td>Lennon, Miss. Mary</td>
      <td>0</td>
      <td>1165</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>370371</td>
    </tr>
    <tr>
      <th>274</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Saade, Mr. Jean Nassr</td>
      <td>0</td>
      <td>1166</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>2676</td>
    </tr>
    <tr>
      <th>282</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Fleming, Miss. Honora</td>
      <td>0</td>
      <td>1174</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>364859</td>
    </tr>
    <tr>
      <th>286</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.2500</td>
      <td>Franklin, Mr. Charles (Charles Fardon)</td>
      <td>0</td>
      <td>1178</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>SOTON/O.Q. 3101314</td>
    </tr>
    <tr>
      <th>288</th>
      <td>NaN</td>
      <td>F E46</td>
      <td>C</td>
      <td>7.2292</td>
      <td>Mardirosian, Mr. Sarkis</td>
      <td>0</td>
      <td>1180</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>2655</td>
    </tr>
    <tr>
      <th>289</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Ford, Mr. Arthur</td>
      <td>0</td>
      <td>1181</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>A/5 1478</td>
    </tr>
    <tr>
      <th>290</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>39.6000</td>
      <td>Rheims, Mr. George Alexander Lucien</td>
      <td>0</td>
      <td>1182</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>PC 17607</td>
    </tr>
    <tr>
      <th>292</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2292</td>
      <td>Nasr, Mr. Mustafa</td>
      <td>0</td>
      <td>1184</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>2652</td>
    </tr>
    <tr>
      <th>297</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>21.6792</td>
      <td>Samaan, Mr. Hanna</td>
      <td>0</td>
      <td>1189</td>
      <td>3</td>
      <td>male</td>
      <td>2</td>
      <td>NaN</td>
      <td>2662</td>
    </tr>
    <tr>
      <th>301</th>
      <td>NaN</td>
      <td>D</td>
      <td>C</td>
      <td>15.0458</td>
      <td>Malachard, Mr. Noel</td>
      <td>0</td>
      <td>1193</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>237735</td>
    </tr>
    <tr>
      <th>304</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>McCarthy, Miss. Catherine Katie""</td>
      <td>0</td>
      <td>1196</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>383123</td>
    </tr>
    <tr>
      <th>312</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.5750</td>
      <td>Sadowitz, Mr. Harry</td>
      <td>0</td>
      <td>1204</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>LP 1588</td>
    </tr>
    <tr>
      <th>332</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Thomas, Mr. Tannous</td>
      <td>0</td>
      <td>1224</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>2684</td>
    </tr>
    <tr>
      <th>339</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2292</td>
      <td>Betros, Master. Seman</td>
      <td>0</td>
      <td>1231</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>2622</td>
    </tr>
    <tr>
      <th>342</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>69.5500</td>
      <td>Sage, Mr. John George</td>
      <td>9</td>
      <td>1234</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>CA. 2343</td>
    </tr>
    <tr>
      <th>344</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>14.5000</td>
      <td>van Billiard, Master. James William</td>
      <td>1</td>
      <td>1236</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>A/5. 851</td>
    </tr>
    <tr>
      <th>357</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8792</td>
      <td>Lockyer, Mr. Edward</td>
      <td>0</td>
      <td>1249</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>1222</td>
    </tr>
    <tr>
      <th>358</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>O'Keefe, Mr. Patrick</td>
      <td>0</td>
      <td>1250</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>368402</td>
    </tr>
    <tr>
      <th>365</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>69.5500</td>
      <td>Sage, Mrs. John (Annie Bullen)</td>
      <td>9</td>
      <td>1257</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>CA. 2343</td>
    </tr>
    <tr>
      <th>366</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>14.4583</td>
      <td>Caram, Mr. Joseph</td>
      <td>0</td>
      <td>1258</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>2689</td>
    </tr>
    <tr>
      <th>380</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>O'Connor, Mr. Patrick</td>
      <td>0</td>
      <td>1272</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>366713</td>
    </tr>
    <tr>
      <th>382</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>14.5000</td>
      <td>Risien, Mrs. Samuel (Emma)</td>
      <td>0</td>
      <td>1274</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>364498</td>
    </tr>
    <tr>
      <th>384</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>12.8750</td>
      <td>Wheeler, Mr. Edwin Frederick""</td>
      <td>0</td>
      <td>1276</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>SC/PARIS 2159</td>
    </tr>
    <tr>
      <th>408</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7208</td>
      <td>Riordan, Miss. Johanna Hannah""</td>
      <td>0</td>
      <td>1300</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>334915</td>
    </tr>
    <tr>
      <th>410</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Naughton, Miss. Hannah</td>
      <td>0</td>
      <td>1302</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>365237</td>
    </tr>
    <tr>
      <th>413</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Spector, Mr. Woolf</td>
      <td>0</td>
      <td>1305</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>A.5. 3236</td>
    </tr>
    <tr>
      <th>416</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Ware, Mr. Frederick</td>
      <td>0</td>
      <td>1308</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>359309</td>
    </tr>
    <tr>
      <th>417</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>C</td>
      <td>22.3583</td>
      <td>Peter, Master. Michael J</td>
      <td>1</td>
      <td>1309</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>2668</td>
    </tr>
  </tbody>
</table>
<p>263 rows × 12 columns</p>
</div>




```python
# to fit age better, take the names, split on the "," on the left side. Split on "." on the right side
#do this to find 'Master vs. Mister' and 'Miss vs. Mrs'
```


```python
names1 = pd.DataFrame(data['Name'].str.split(',', n=1).tolist(), columns = ['surname', 'given'])
names2 = pd.DataFrame(names1['given'].str.split('.', n=1).tolist(), columns = ['prefix', 'given'])
prefix = names2['prefix']
prefix = pd.DataFrame(prefix)
prefix.columns = ['title']
data['title'] = prefix
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>Fare</th>
      <th>Name</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Sex</th>
      <th>SibSp</th>
      <th>Survived</th>
      <th>Ticket</th>
      <th>title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>22.0</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.2500</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>0.0</td>
      <td>A/5 21171</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1</th>
      <td>38.0</td>
      <td>C85</td>
      <td>C</td>
      <td>71.2833</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>PC 17599</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>2</th>
      <td>26.0</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.9250</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>0</td>
      <td>3</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>STON/O2. 3101282</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>3</th>
      <td>35.0</td>
      <td>C123</td>
      <td>S</td>
      <td>53.1000</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>113803</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>4</th>
      <td>35.0</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Allen, Mr. William Henry</td>
      <td>0</td>
      <td>5</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>373450</td>
      <td>Mr</td>
    </tr>
  </tbody>
</table>
</div>




```python
#fill the null values in 'Age' column with the mean of each title
data['Age'] = data.groupby('title').transform(lambda x: x.fillna(x.mean()))
```


```python
data.Age.isnull().sum()
```




    0




```python
data.reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>Age</th>
      <th>Cabin</th>
      <th>Embarked</th>
      <th>Fare</th>
      <th>Name</th>
      <th>Parch</th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Sex</th>
      <th>SibSp</th>
      <th>Survived</th>
      <th>Ticket</th>
      <th>title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>22.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.2500</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>0.0</td>
      <td>A/5 21171</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>38.000000</td>
      <td>C85</td>
      <td>C</td>
      <td>71.2833</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>PC 17599</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>26.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.9250</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>0</td>
      <td>3</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>STON/O2. 3101282</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>35.000000</td>
      <td>C123</td>
      <td>S</td>
      <td>53.1000</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>113803</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>35.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Allen, Mr. William Henry</td>
      <td>0</td>
      <td>5</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>373450</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>Q</td>
      <td>8.4583</td>
      <td>Moran, Mr. James</td>
      <td>0</td>
      <td>6</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>330877</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>54.000000</td>
      <td>E46</td>
      <td>S</td>
      <td>51.8625</td>
      <td>McCarthy, Mr. Timothy J</td>
      <td>0</td>
      <td>7</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>17463</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>2.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>21.0750</td>
      <td>Palsson, Master. Gosta Leonard</td>
      <td>1</td>
      <td>8</td>
      <td>3</td>
      <td>male</td>
      <td>3</td>
      <td>0.0</td>
      <td>349909</td>
      <td>Master</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>27.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>11.1333</td>
      <td>Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg)</td>
      <td>2</td>
      <td>9</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>347742</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>14.000000</td>
      <td>NaN</td>
      <td>C</td>
      <td>30.0708</td>
      <td>Nasser, Mrs. Nicholas (Adele Achem)</td>
      <td>0</td>
      <td>10</td>
      <td>2</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>237736</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10</td>
      <td>4.000000</td>
      <td>G6</td>
      <td>S</td>
      <td>16.7000</td>
      <td>Sandstrom, Miss. Marguerite Rut</td>
      <td>1</td>
      <td>11</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>PP 9549</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>11</th>
      <td>11</td>
      <td>58.000000</td>
      <td>C103</td>
      <td>S</td>
      <td>26.5500</td>
      <td>Bonnell, Miss. Elizabeth</td>
      <td>0</td>
      <td>12</td>
      <td>1</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>113783</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>12</th>
      <td>12</td>
      <td>20.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Saundercock, Mr. William Henry</td>
      <td>0</td>
      <td>13</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>A/5. 2151</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>13</th>
      <td>13</td>
      <td>39.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>31.2750</td>
      <td>Andersson, Mr. Anders Johan</td>
      <td>5</td>
      <td>14</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>0.0</td>
      <td>347082</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>14</th>
      <td>14</td>
      <td>14.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8542</td>
      <td>Vestrom, Miss. Hulda Amanda Adolfina</td>
      <td>0</td>
      <td>15</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>0.0</td>
      <td>350406</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>15</th>
      <td>15</td>
      <td>55.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>16.0000</td>
      <td>Hewlett, Mrs. (Mary D Kingcome)</td>
      <td>0</td>
      <td>16</td>
      <td>2</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>248706</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>16</th>
      <td>16</td>
      <td>2.000000</td>
      <td>NaN</td>
      <td>Q</td>
      <td>29.1250</td>
      <td>Rice, Master. Eugene</td>
      <td>1</td>
      <td>17</td>
      <td>3</td>
      <td>male</td>
      <td>4</td>
      <td>0.0</td>
      <td>382652</td>
      <td>Master</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>S</td>
      <td>13.0000</td>
      <td>Williams, Mr. Charles Eugene</td>
      <td>0</td>
      <td>18</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>244373</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>18</th>
      <td>18</td>
      <td>31.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>18.0000</td>
      <td>Vander Planke, Mrs. Julius (Emelia Maria Vande...</td>
      <td>0</td>
      <td>19</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>0.0</td>
      <td>345763</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>19</th>
      <td>19</td>
      <td>33.760194</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Masselmani, Mrs. Fatima</td>
      <td>0</td>
      <td>20</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>2649</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>20</th>
      <td>20</td>
      <td>35.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>26.0000</td>
      <td>Fynney, Mr. Joseph J</td>
      <td>0</td>
      <td>21</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>239865</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>21</th>
      <td>21</td>
      <td>34.000000</td>
      <td>D56</td>
      <td>S</td>
      <td>13.0000</td>
      <td>Beesley, Mr. Lawrence</td>
      <td>0</td>
      <td>22</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>248698</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>22</th>
      <td>22</td>
      <td>15.000000</td>
      <td>NaN</td>
      <td>Q</td>
      <td>8.0292</td>
      <td>McGowan, Miss. Anna "Annie"</td>
      <td>0</td>
      <td>23</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>330923</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>23</th>
      <td>23</td>
      <td>28.000000</td>
      <td>A6</td>
      <td>S</td>
      <td>35.5000</td>
      <td>Sloper, Mr. William Thompson</td>
      <td>0</td>
      <td>24</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>1.0</td>
      <td>113788</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>24</th>
      <td>24</td>
      <td>8.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>21.0750</td>
      <td>Palsson, Miss. Torborg Danira</td>
      <td>1</td>
      <td>25</td>
      <td>3</td>
      <td>female</td>
      <td>3</td>
      <td>0.0</td>
      <td>349909</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>25</th>
      <td>25</td>
      <td>38.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>31.3875</td>
      <td>Asplund, Mrs. Carl Oscar (Selma Augusta Emilia...</td>
      <td>5</td>
      <td>26</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>1.0</td>
      <td>347077</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>26</th>
      <td>26</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>C</td>
      <td>7.2250</td>
      <td>Emir, Mr. Farred Chehab</td>
      <td>0</td>
      <td>27</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>2631</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>27</th>
      <td>27</td>
      <td>19.000000</td>
      <td>C23 C25 C27</td>
      <td>S</td>
      <td>263.0000</td>
      <td>Fortune, Mr. Charles Alexander</td>
      <td>2</td>
      <td>28</td>
      <td>1</td>
      <td>male</td>
      <td>3</td>
      <td>0.0</td>
      <td>19950</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>28</th>
      <td>28</td>
      <td>25.455752</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.8792</td>
      <td>O'Dwyer, Miss. Ellen "Nellie"</td>
      <td>0</td>
      <td>29</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>1.0</td>
      <td>330959</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>29</th>
      <td>29</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.8958</td>
      <td>Todoroff, Mr. Lalio</td>
      <td>0</td>
      <td>30</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>0.0</td>
      <td>349216</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1279</th>
      <td>388</td>
      <td>21.000000</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Canavan, Mr. Patrick</td>
      <td>0</td>
      <td>1280</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>364858</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1280</th>
      <td>389</td>
      <td>6.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>21.0750</td>
      <td>Palsson, Master. Paul Folke</td>
      <td>1</td>
      <td>1281</td>
      <td>3</td>
      <td>male</td>
      <td>3</td>
      <td>NaN</td>
      <td>349909</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1281</th>
      <td>390</td>
      <td>23.000000</td>
      <td>B24</td>
      <td>S</td>
      <td>93.5000</td>
      <td>Payne, Mr. Vivian Ponsonby</td>
      <td>0</td>
      <td>1282</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>12749</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1282</th>
      <td>391</td>
      <td>51.000000</td>
      <td>D28</td>
      <td>S</td>
      <td>39.4000</td>
      <td>Lines, Mrs. Ernest H (Elizabeth Lindsey James)</td>
      <td>1</td>
      <td>1283</td>
      <td>1</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>PC 17592</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1283</th>
      <td>392</td>
      <td>13.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>20.2500</td>
      <td>Abbott, Master. Eugene Joseph</td>
      <td>2</td>
      <td>1284</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>C.A. 2673</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1284</th>
      <td>393</td>
      <td>47.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>10.5000</td>
      <td>Gilbert, Mr. William</td>
      <td>0</td>
      <td>1285</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>C.A. 30769</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1285</th>
      <td>394</td>
      <td>29.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>22.0250</td>
      <td>Kink-Heilmann, Mr. Anton</td>
      <td>1</td>
      <td>1286</td>
      <td>3</td>
      <td>male</td>
      <td>3</td>
      <td>NaN</td>
      <td>315153</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>1286</th>
      <td>395</td>
      <td>18.000000</td>
      <td>C31</td>
      <td>S</td>
      <td>60.0000</td>
      <td>Smith, Mrs. Lucien Philip (Mary Eloise Hughes)</td>
      <td>0</td>
      <td>1287</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>13695</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1287</th>
      <td>396</td>
      <td>24.000000</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.2500</td>
      <td>Colbert, Mr. Patrick</td>
      <td>0</td>
      <td>1288</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>371109</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1288</th>
      <td>397</td>
      <td>48.000000</td>
      <td>B41</td>
      <td>C</td>
      <td>79.2000</td>
      <td>Frolicher-Stehli, Mrs. Maxmillian (Margaretha ...</td>
      <td>1</td>
      <td>1289</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>13567</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1289</th>
      <td>398</td>
      <td>22.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.7750</td>
      <td>Larsson-Rondberg, Mr. Edvard A</td>
      <td>0</td>
      <td>1290</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>347065</td>
      <td>Dr</td>
    </tr>
    <tr>
      <th>1290</th>
      <td>399</td>
      <td>31.000000</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7333</td>
      <td>Conlon, Mr. Thomas Henry</td>
      <td>0</td>
      <td>1291</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>21332</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>1291</th>
      <td>400</td>
      <td>30.000000</td>
      <td>C7</td>
      <td>S</td>
      <td>164.8667</td>
      <td>Bonnell, Miss. Caroline</td>
      <td>0</td>
      <td>1292</td>
      <td>1</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>36928</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1292</th>
      <td>401</td>
      <td>38.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>21.0000</td>
      <td>Gale, Mr. Harry</td>
      <td>0</td>
      <td>1293</td>
      <td>2</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>28664</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1293</th>
      <td>402</td>
      <td>22.000000</td>
      <td>NaN</td>
      <td>C</td>
      <td>59.4000</td>
      <td>Gibson, Miss. Dorothy Winifred</td>
      <td>1</td>
      <td>1294</td>
      <td>1</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>112378</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1294</th>
      <td>403</td>
      <td>17.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>47.1000</td>
      <td>Carrau, Mr. Jose Pedro</td>
      <td>0</td>
      <td>1295</td>
      <td>1</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>113059</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1295</th>
      <td>404</td>
      <td>43.000000</td>
      <td>D40</td>
      <td>C</td>
      <td>27.7208</td>
      <td>Frauenthal, Mr. Isaac Gerald</td>
      <td>0</td>
      <td>1296</td>
      <td>1</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>17765</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1296</th>
      <td>405</td>
      <td>20.000000</td>
      <td>D38</td>
      <td>C</td>
      <td>13.8625</td>
      <td>Nourney, Mr. Alfred (Baron von Drachstedt")"</td>
      <td>0</td>
      <td>1297</td>
      <td>2</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>SC/PARIS 2166</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1297</th>
      <td>406</td>
      <td>23.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>10.5000</td>
      <td>Ware, Mr. William Jeffery</td>
      <td>0</td>
      <td>1298</td>
      <td>2</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>28666</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1298</th>
      <td>407</td>
      <td>50.000000</td>
      <td>C80</td>
      <td>C</td>
      <td>211.5000</td>
      <td>Widener, Mr. George Dunton</td>
      <td>1</td>
      <td>1299</td>
      <td>1</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>113503</td>
      <td>Master</td>
    </tr>
    <tr>
      <th>1299</th>
      <td>408</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7208</td>
      <td>Riordan, Miss. Johanna Hannah""</td>
      <td>0</td>
      <td>1300</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>334915</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1300</th>
      <td>409</td>
      <td>3.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>13.7750</td>
      <td>Peacock, Miss. Treasteall</td>
      <td>1</td>
      <td>1301</td>
      <td>3</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>SOTON/O.Q. 3101315</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1301</th>
      <td>410</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>Q</td>
      <td>7.7500</td>
      <td>Naughton, Miss. Hannah</td>
      <td>0</td>
      <td>1302</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>365237</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1302</th>
      <td>411</td>
      <td>37.000000</td>
      <td>C78</td>
      <td>Q</td>
      <td>90.0000</td>
      <td>Minahan, Mrs. William Edward (Lillian E Thorpe)</td>
      <td>0</td>
      <td>1303</td>
      <td>1</td>
      <td>female</td>
      <td>1</td>
      <td>NaN</td>
      <td>19928</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1303</th>
      <td>412</td>
      <td>28.000000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.7750</td>
      <td>Henriksson, Miss. Jenny Lovisa</td>
      <td>0</td>
      <td>1304</td>
      <td>3</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>347086</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>1304</th>
      <td>413</td>
      <td>31.563774</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Spector, Mr. Woolf</td>
      <td>0</td>
      <td>1305</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>A.5. 3236</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1305</th>
      <td>414</td>
      <td>39.000000</td>
      <td>C105</td>
      <td>C</td>
      <td>108.9000</td>
      <td>Oliva y Ocana, Dona. Fermina</td>
      <td>0</td>
      <td>1306</td>
      <td>1</td>
      <td>female</td>
      <td>0</td>
      <td>NaN</td>
      <td>PC 17758</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1306</th>
      <td>415</td>
      <td>38.500000</td>
      <td>NaN</td>
      <td>S</td>
      <td>7.2500</td>
      <td>Saether, Mr. Simon Sivertsen</td>
      <td>0</td>
      <td>1307</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>SOTON/O.Q. 3101262</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>1307</th>
      <td>416</td>
      <td>33.760194</td>
      <td>NaN</td>
      <td>S</td>
      <td>8.0500</td>
      <td>Ware, Mr. Frederick</td>
      <td>0</td>
      <td>1308</td>
      <td>3</td>
      <td>male</td>
      <td>0</td>
      <td>NaN</td>
      <td>359309</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>1308</th>
      <td>417</td>
      <td>25.455752</td>
      <td>NaN</td>
      <td>C</td>
      <td>22.3583</td>
      <td>Peter, Master. Michael J</td>
      <td>1</td>
      <td>1309</td>
      <td>3</td>
      <td>male</td>
      <td>1</td>
      <td>NaN</td>
      <td>2668</td>
      <td>Miss</td>
    </tr>
  </tbody>
</table>
<p>1309 rows × 14 columns</p>
</div>




```python
#to do the above name strip in one line:
#data['title'] = data.Name.map(lambda x: x.split(',')[1].split('.')[0].strip())
```

# Feature Engineering

Step 3.5: Add/remove some features based on whether or not they are going to matter in our model.


```python
data.Parch.describe()
#I dont know what this does and the std is higher than the mean which makes me think it's a bad predictor of anything
```




    count    1309.000000
    mean        0.385027
    std         0.865560
    min         0.000000
    25%         0.000000
    50%         0.000000
    75%         0.000000
    max         9.000000
    Name: Parch, dtype: float64




```python
#Filling the 2 Embarked null values with the most common value (Do I even need this column?)
#data.Embarked.fillna('S', inplace = True)
```


```python
#Create dummy variables for the categoricals in the dataset
Pclassdumm = pd.get_dummies(data['Pclass'], drop_first = True)
data = pd.concat([data, Pclassdumm], axis= 1)
data.drop('Pclass', inplace = True, axis= 1)
```


```python
sexdumm = pd.get_dummies(data['Sex'], drop_first = True)
data = pd.concat([data, sexdumm], axis= 1)
data.drop('Sex', inplace = True, axis=1)
```


```python
#Do I even need this?
#Embardumm = pd.get_dummies(data['Embarked'], drop_first = True)
#data = pd.concat([data, Embardumm], axis= 1)
#data.drop('Embarked', inplace = True, axis=1)
```


```python
#Drop all the columns we dont need
data.drop(['Name', 'PassengerId', 'title', 'Cabin', 'Ticket', 'Embarked', 'SibSp', 'Fare'], inplace = True, axis = 1)
```


```python
data['Children'] = data['Age'] < 16
```


```python
data['Children'].head()
```




    0    False
    1    False
    2    False
    3    False
    4    False
    Name: Children, dtype: bool




```python
data.shape
```




    (1309, 6)




```python
data.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Survived</th>
      <th>2</th>
      <th>3</th>
      <th>male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1309.000000</td>
      <td>891.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>29.930167</td>
      <td>0.383838</td>
      <td>0.211612</td>
      <td>0.541635</td>
      <td>0.644003</td>
    </tr>
    <tr>
      <th>std</th>
      <td>12.990814</td>
      <td>0.486592</td>
      <td>0.408607</td>
      <td>0.498454</td>
      <td>0.478997</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.170000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>22.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>30.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>35.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>80.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
data.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Survived</th>
      <th>2</th>
      <th>3</th>
      <th>male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1309.000000</td>
      <td>891.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
      <td>1309.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>29.930167</td>
      <td>0.383838</td>
      <td>0.211612</td>
      <td>0.541635</td>
      <td>0.644003</td>
    </tr>
    <tr>
      <th>std</th>
      <td>12.990814</td>
      <td>0.486592</td>
      <td>0.408607</td>
      <td>0.498454</td>
      <td>0.478997</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.170000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>22.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>30.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>35.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>80.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



# Training the Model

Step 4: Since we're done changing around our features and cleaning our data, we can now re-split the data into training and test sets, run our assessment function to determine which would be the best predictor, and then predict on the test data.


```python
#re-split data into our TRAINING SET so that we can use it to assess
train = data[data['Survived'].notnull()]
```


```python
train.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 891 entries, 0 to 890
    Data columns (total 6 columns):
    Age         891 non-null float64
    Survived    891 non-null float64
    2           891 non-null uint8
    3           891 non-null uint8
    male        891 non-null uint8
    Children    891 non-null bool
    dtypes: bool(1), float64(2), uint8(3)
    memory usage: 24.4 KB



```python
#split the 'Survived' column off of the TRAINING set so that we can assess our predictions
target = train[['Survived']]
features = train.drop('Survived', axis= 1)
```


```python
features.shape, target.shape
```




    ((891, 5), (891, 1))




```python
features.isnull().sum()
```




    Age         0
    2           0
    3           0
    male        0
    Children    0
    dtype: int64



On previous iterations, my model was performing at about 77.5% accuracy (with the best performance at 79%). It has come to my attention that this may be due to overtraining or overfitting since this is a smaller dataset. I will use train_test_split to try and reduce this error.


```python
x_train, x_test, y_train, y_test = train_test_split(features, target, test_size = .2, random_state = 42)
#adding the train_test_split decreased my score to 75%
```


```python
tDMassess(x_train, y_train)
```

    C:\Users\ckoni\Anaconda3\lib\site-packages\sklearn\utils\validation.py:578: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().
      y = column_or_1d(y, warn=True)
    C:\Users\ckoni\Anaconda3\lib\site-packages\ipykernel_launcher.py:5: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples,), for example using ravel().
      """
    C:\Users\ckoni\Anaconda3\lib\site-packages\sklearn\utils\validation.py:578: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().
      y = column_or_1d(y, warn=True)
    C:\Users\ckoni\Anaconda3\lib\site-packages\ipykernel_launcher.py:5: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().
      """
    C:\Users\ckoni\Anaconda3\lib\site-packages\sklearn\utils\validation.py:578: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().
      y = column_or_1d(y, warn=True)
    C:\Users\ckoni\Anaconda3\lib\site-packages\sklearn\utils\validation.py:578: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().
      y = column_or_1d(y, warn=True)


    0
    [0.8525280898876404]
    [0.8721461187214612]
    [0.7126865671641791]
    [0.784394250513347]
    next loop
    1
    [0.8525280898876404, 0.875]
    [0.8721461187214612, 0.8744769874476988]
    [0.7126865671641791, 0.7798507462686567]
    [0.784394250513347, 0.8244575936883628]
    next loop
    2
    [0.8525280898876404, 0.875, 0.8778089887640449]
    [0.8721461187214612, 0.8744769874476988, 0.8951965065502183]
    [0.7126865671641791, 0.7798507462686567, 0.7649253731343284]
    [0.784394250513347, 0.8244575936883628, 0.8249496981891348]
    next loop
    3
    [0.8525280898876404, 0.875, 0.8778089887640449, 0.7893258426966292]
    [0.8721461187214612, 0.8744769874476988, 0.8951965065502183, 0.7398373983739838]
    [0.7126865671641791, 0.7798507462686567, 0.7649253731343284, 0.6791044776119403]
    [0.784394250513347, 0.8244575936883628, 0.8249496981891348, 0.708171206225681]
    next loop
    4
    [0.8525280898876404, 0.875, 0.8778089887640449, 0.7893258426966292, 0.8441011235955056]
    [0.8721461187214612, 0.8744769874476988, 0.8951965065502183, 0.7398373983739838, 0.8257261410788381]
    [0.7126865671641791, 0.7798507462686567, 0.7649253731343284, 0.6791044776119403, 0.7425373134328358]
    [0.784394250513347, 0.8244575936883628, 0.8249496981891348, 0.708171206225681, 0.7819253438113948]
    next loop
    5
    [0.8525280898876404, 0.875, 0.8778089887640449, 0.7893258426966292, 0.8441011235955056, 0.7851123595505618]
    [0.8721461187214612, 0.8744769874476988, 0.8951965065502183, 0.7398373983739838, 0.8257261410788381, 0.7031802120141343]
    [0.7126865671641791, 0.7798507462686567, 0.7649253731343284, 0.6791044776119403, 0.7425373134328358, 0.7425373134328358]
    [0.784394250513347, 0.8244575936883628, 0.8249496981891348, 0.708171206225681, 0.7819253438113948, 0.722323049001815]
    next loop
    6
    [0.8525280898876404, 0.875, 0.8778089887640449, 0.7893258426966292, 0.8441011235955056, 0.7851123595505618, 0.7991573033707865]
    [0.8721461187214612, 0.8744769874476988, 0.8951965065502183, 0.7398373983739838, 0.8257261410788381, 0.7031802120141343, 0.7470355731225297]
    [0.7126865671641791, 0.7798507462686567, 0.7649253731343284, 0.6791044776119403, 0.7425373134328358, 0.7425373134328358, 0.7052238805970149]
    [0.784394250513347, 0.8244575936883628, 0.8249496981891348, 0.708171206225681, 0.7819253438113948, 0.722323049001815, 0.72552783109405]
    next loop





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Accuracy</th>
      <th>Precision</th>
      <th>Recall</th>
      <th>F1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Gradient Boosting</th>
      <td>0.852528</td>
      <td>0.872146</td>
      <td>0.712687</td>
      <td>0.784394</td>
    </tr>
    <tr>
      <th>Random Forest</th>
      <td>0.875000</td>
      <td>0.874477</td>
      <td>0.779851</td>
      <td>0.824458</td>
    </tr>
    <tr>
      <th>Decision Tree</th>
      <td>0.877809</td>
      <td>0.895197</td>
      <td>0.764925</td>
      <td>0.824950</td>
    </tr>
    <tr>
      <th>Logisic Regression</th>
      <td>0.789326</td>
      <td>0.739837</td>
      <td>0.679104</td>
      <td>0.708171</td>
    </tr>
    <tr>
      <th>K Nearest</th>
      <td>0.844101</td>
      <td>0.825726</td>
      <td>0.742537</td>
      <td>0.781925</td>
    </tr>
    <tr>
      <th>GaussianNB</th>
      <td>0.785112</td>
      <td>0.703180</td>
      <td>0.742537</td>
      <td>0.722323</td>
    </tr>
    <tr>
      <th>BernoulliNB</th>
      <td>0.799157</td>
      <td>0.747036</td>
      <td>0.705224</td>
      <td>0.725528</td>
    </tr>
  </tbody>
</table>
</div>



Seems like Gradient Boosting or Random Forest would be the best option to predict here


```python
#Since we found that GB would be the best model, we can re-split our ORIGINAL, FULL dataset into the training and testing sets
training = data[:891]
testing = data[891:]
```


```python
testing.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Survived</th>
      <th>2</th>
      <th>3</th>
      <th>male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>418.000000</td>
      <td>0.0</td>
      <td>418.000000</td>
      <td>418.000000</td>
      <td>418.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>30.223491</td>
      <td>NaN</td>
      <td>0.222488</td>
      <td>0.521531</td>
      <td>0.636364</td>
    </tr>
    <tr>
      <th>std</th>
      <td>12.757613</td>
      <td>NaN</td>
      <td>0.416416</td>
      <td>0.500135</td>
      <td>0.481622</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.170000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>22.625000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>30.000000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>36.000000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>76.000000</td>
      <td>NaN</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
#remove this column since it's all nulls, we will be replacing it with our predictions soon
testing.drop('Survived', inplace = True, axis= 1)
```

    C:\Users\ckoni\Anaconda3\lib\site-packages\pandas\core\frame.py:3694: SettingWithCopyWarning:
    A value is trying to be set on a copy of a slice from a DataFrame

    See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
      errors=errors)



```python
training.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 891 entries, 0 to 890
    Data columns (total 6 columns):
    Age         891 non-null float64
    Survived    891 non-null float64
    2           891 non-null uint8
    3           891 non-null uint8
    male        891 non-null uint8
    Children    891 non-null bool
    dtypes: bool(1), float64(2), uint8(3)
    memory usage: 24.4 KB



```python
testing.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 418 entries, 0 to 417
    Data columns (total 5 columns):
    Age         418 non-null float64
    2           418 non-null uint8
    3           418 non-null uint8
    male        418 non-null uint8
    Children    418 non-null bool
    dtypes: bool(1), float64(1), uint8(3)
    memory usage: 8.2 KB



```python
#Use Gradient Boosting to predict on the TESTING set and save to a variable, predict
predict = gbc.predict(testing)
#predict = r.predict(testing)
#Using random forest got me a 67% accuracy rating... 12% lower than my best with GB
```


```python
#add the predictions as the survival values in the TESTING test data set which we recently dropped
test["Survived"] = predict.astype('int')
```


```python
test.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 418 entries, 0 to 417
    Data columns (total 12 columns):
    PassengerId    418 non-null int64
    Pclass         418 non-null int64
    Name           418 non-null object
    Sex            418 non-null object
    Age            332 non-null float64
    SibSp          418 non-null int64
    Parch          418 non-null int64
    Ticket         418 non-null object
    Fare           418 non-null float64
    Cabin          91 non-null object
    Embarked       418 non-null object
    Survived       418 non-null int32
    dtypes: float64(2), int32(1), int64(4), object(5)
    memory usage: 37.6+ KB



```python
#Kaggle only needs a DataFrame containing the PassengerId and our predicted values
test = test[['PassengerId', 'Survived']]
```


```python
test.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 418 entries, 0 to 417
    Data columns (total 2 columns):
    PassengerId    418 non-null int64
    Survived       418 non-null int32
    dtypes: int32(1), int64(1)
    memory usage: 5.0 KB



```python
#write to a csv file so we can upload to Kaggle
test.to_csv('titanic_predict.csv', index = False)
```


```python
test.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>418.000000</td>
      <td>418.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1100.500000</td>
      <td>0.325359</td>
    </tr>
    <tr>
      <th>std</th>
      <td>120.810458</td>
      <td>0.469070</td>
    </tr>
    <tr>
      <th>min</th>
      <td>892.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>996.250000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1100.500000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1204.750000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1309.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
